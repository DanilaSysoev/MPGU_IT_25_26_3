## Web 10. –û—Å–Ω–æ–≤—ã PostgreSQL (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª 8, –¥–µ–¥–ª–∞–π 18.11.2025 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ)

---

### ‚ÄºÔ∏è –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Mermaid (—è –∏—Å–ø–æ–ª—å–∑—É—é [Markdown Preview Mermaid Support](https://marketplace.visualstudio.com/items?itemName=bierner.markdown-mermaid) –æ—Ç –∞–≤—Ç–æ—Ä–∞ Matt Bierner).

### ‚ÄºÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ—Ç–∞—Ü–∏–∏ —Å–≤—è–∑–µ–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤ Mermaid –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [–∑–¥–µ—Å—å](https://docs.mermaidchart.com/mermaid-oss/syntax/entityRelationshipDiagram.html#relationship-syntax)

---

### üßæ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è

–í–æ—Ç **–∞–¥–¥–∏—Ç–∏–≤–Ω–∞—è —à–∫–∞–ª–∞ –æ—Ü–µ–Ω–∫–∏ (0‚Äì8 –±–∞–ª–ª–æ–≤)** –¥–ª—è –∑–∞–¥–∞–Ω–∏–π –ø–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ë–î —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ —Å–≤—è–∑–µ–π (1:1, 1:N, M:N).
–ö–∞–∂–¥—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –∞—Å–ø–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∏ –≤—Å–µ –±–∞–ª–ª—ã —Å—É–º–º–∏—Ä—É—é—Ç—Å—è.

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ (–º–∞–∫—Å–∏–º—É–º 8 –±–∞–ª–ª–æ–≤)

| ‚Ññ     | –ö—Ä–∏—Ç–µ—Ä–∏–π                                                | –ß—Ç–æ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è                                                                                                                                                | –ë–∞–ª–ª—ã   |
| ----- | ------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| **1** | **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü**                       | –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã, –∏—Ö —Å–æ—Å—Ç–∞–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–¥–∞–Ω–∏—é (–Ω–∞–∑–≤–∞–Ω–∏—è, –ø–æ–ª—è, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤—ã–±—Ä–∞–Ω—ã —É–º–µ—Å—Ç–Ω–æ). –ù–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –∏–ª–∏ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π.                 | **1** |
| **2** | **–°–≤—è–∑—å 1:1**                    | –°–≤—è–∑—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.         | **2** |
| **3** | **–°–≤—è–∑—å 1:N**                    | –°–≤—è–∑—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.         | **2** |
| **4** | **–°–≤—è–∑—å M:N**                    | –°–≤—è–∑—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.         | **2** |
| **5** | **–ö–ª—é—á–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏**                     | –£–∫–∞–∑–∞–Ω—ã –ø–µ—Ä–≤–∏—á–Ω—ã–µ –∏ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è `NOT NULL`, `UNIQUE`, `CHECK`, `ON DELETE` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —É—Å–ª–æ–≤–∏–µ–º. –ù–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å—Å—ã–ª–æ—á–Ω–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏.      | **1** |

---

### ‚ö†Ô∏è –®—Ç—Ä–∞—Ñ—ã –∑–∞ —Å—Ç–∏–ª—å (–¥–æ ‚Äì2 –±–∞–ª–ª–æ–≤ —Å—É–º–º–∞—Ä–Ω–æ)

* –°–º–µ—à–∞–Ω–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (`create TABLE` –≤–º–µ—Å—Ç–æ `CREATE TABLE`) ‚Äî ‚àí0.5
* –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫ ‚Äî ‚àí0.5
* CamelCase –≤ –∏–º–µ–Ω–∞—Ö —Ç–∞–±–ª–∏—Ü/–∫–æ–ª–æ–Ω–æ–∫ ‚Äî ‚àí0.5
* –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `;` –≤ –∫–æ–Ω—Ü–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ ‚Äî ‚àí0.5

---

<details>
<summary><strong style="font-size: 16px;">–ó–∞–¥–∞—á–∞ 1</strong></summary>

---

## –ó–∞–¥–∞–Ω–∏–µ: ¬´–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ ‚Äî –∞—Ä—Ç–∏—Å—Ç—ã –∏ –∞–ª—å–±–æ–º—ã¬ª

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ **4 —Ç–∞–±–ª–∏—Ü**, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Ç–∏–ø—ã —Å–≤—è–∑–µ–π:

* **One-to-One (1:1)**
* **One-to-Many (1:N)**
* **Many-to-Many (M:N)**

---

## –î–∏–∞–≥—Ä–∞–º–º–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–≤—è–∑–µ–π

```mermaid
erDiagram
    ARTIST ||--o{ ALBUM : "1:N (primary_artist_id)"
    ALBUM ||--|| ALBUM_INFO : "1:1"
    ARTIST }o--o{ ALBUM_CONTRIBUTOR : "M:N (—Å–æ–∞–≤—Ç–æ—Ä—ã)"
    ALBUM  }o--o{ ALBUM_CONTRIBUTOR : ""
```

---

## –û–ø–∏—Å–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π

### 1. ARTIST

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **name** ‚Äî –∏–º—è –∞—Ä—Ç–∏—Å—Ç–∞ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
* **country** ‚Äî —Å—Ç—Ä–∞–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

### 2. ALBUM

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **title** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å–±–æ–º–∞
* **release_year** ‚Äî –≥–æ–¥ –≤—ã–ø—É—Å–∫–∞
* **primary_artist_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `ARTIST(id)`

**–°–≤—è–∑—å:**
–û–¥–∏–Ω –∞—Ä—Ç–∏—Å—Ç –º–æ–∂–µ—Ç –≤—ã–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–ª—å–±–æ–º–æ–≤ ‚Üí —ç—Ç–æ **—Å–≤—è–∑—å 1:N** –º–µ–∂–¥—É `ARTIST` –∏ `ALBUM`.

---

### 3. ALBUM_INFO

* **album_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `ALBUM(id)` –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **upc** ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∞–ª—å–±–æ–º–∞
* **label** ‚Äî –∏–∑–¥–∞—Ç–µ–ª—å
* **duration_minutes** ‚Äî –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö

**–°–≤—è–∑—å:**
–ö–∞–∂–¥—ã–π –∞–ª—å–±–æ–º –∏–º–µ–µ—Ç —Ä–æ–≤–Ω–æ –æ–¥–Ω—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π ‚Üí —ç—Ç–æ **—Å–≤—è–∑—å 1:1** –º–µ–∂–¥—É `ALBUM` –∏ `ALBUM_INFO`.

---

### 4. ALBUM_CONTRIBUTOR

* **album_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `ALBUM(id)`
* **artist_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `ARTIST(id)`
* **role** ‚Äî —Ä–æ–ª—å –∞—Ä—Ç–∏—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´producer¬ª, ¬´featured¬ª, ¬´mixer¬ª)
* **–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (album_id, artist_id, role)**

**–°–≤—è–∑—å:**
–û–¥–∏–Ω –∞—Ä—Ç–∏—Å—Ç –º–æ–∂–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∞–ª—å–±–æ–º–æ–≤, –∏ –æ–¥–∏–Ω –∞–ª—å–±–æ–º –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ –∞—Ä—Ç–∏—Å—Ç–æ–≤-—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ‚Üí —ç—Ç–æ **—Å–≤—è–∑—å M:N**, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `ALBUM_CONTRIBUTOR`.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å 4 —Ç–∞–±–ª–∏—Ü—ã —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∏ —Å–≤—è–∑—è–º–∏.
2. –î–ª—è —Å–≤—è–∑–∏ **1:N**:

   * –ø–æ–ª–µ `primary_artist_id` –≤ —Ç–∞–±–ª–∏—Ü–µ `ALBUM` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (`NOT NULL`)
   * –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á `primary_artist_id` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ `ARTIST(id)`
3. –î–ª—è —Å–≤—è–∑–∏ **1:1**:

   * –≤ —Ç–∞–±–ª–∏—Ü–µ `ALBUM_INFO` –∫–ª—é—á `album_id` —è–≤–ª—è–µ—Ç—Å—è –∏ **PK**, –∏ **FK** –Ω–∞ `ALBUM(id)`
4. –î–ª—è —Å–≤—è–∑–∏ **M:N**:

   * —Ç–∞–±–ª–∏—Ü–∞ `ALBUM_CONTRIBUTOR` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á `(album_id, artist_id, role)`
   * –æ–±–∞ –ø–æ–ª—è `album_id` –∏ `artist_id` —è–≤–ª—è—é—Ç—Å—è –≤–Ω–µ—à–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏
5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö:

   * `release_year` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –º–µ–Ω—å—à–µ 1900 –∏ –Ω–µ –±–æ–ª—å—à–µ —Ç–µ–∫—É—â–µ–≥–æ –≥–æ–¥–∞
   * `duration_minutes` ‚Äî –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ 0
   * `upc` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ
6. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:

   * —É–¥–∞–ª–µ–Ω–∏–µ –∞—Ä—Ç–∏—Å—Ç–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ, –µ—Å–ª–∏ –æ–Ω —É–∫–∞–∑–∞–Ω –∫–∞–∫ `primary_artist` –≤ –∞–ª—å–±–æ–º–µ (`ON DELETE RESTRICT`)
   * —É–¥–∞–ª–µ–Ω–∏–µ –∞–ª—å–±–æ–º–∞ –¥–æ–ª–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ `ALBUM_INFO` –∏ `ALBUM_CONTRIBUTOR` (`ON DELETE CASCADE`)

</details>

---

<details>
<summary><strong style="font-size: 16px;">–ó–∞–¥–∞—á–∞ 2</strong></summary>

## –ó–∞–¥–∞–Ω–∏–µ: ¬´–ö–∏–Ω–æ–ø—Ä–æ–∫–∞—Ç ‚Äî —Ä–µ–∂–∏—Å—Å—ë—Ä—ã –∏ —Ñ–∏–ª—å–º—ã¬ª

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ **4 —Ç–∞–±–ª–∏—Ü**, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â—É—é —Å–≤—è–∑–∏:

* **One-to-One (1:1)**
* **One-to-Many (1:N)**
* **Many-to-Many (M:N)**

---

## –î–∏–∞–≥—Ä–∞–º–º–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–≤—è–∑–µ–π

```mermaid
erDiagram
    DIRECTOR ||--o{ FILM : "1:N (primary_director_id)"
    FILM ||--|| FILM_INFO : "1:1"
    DIRECTOR }o--o{ FILM_CREDIT : "M:N (—É—á–∞—Å—Ç–∏–µ –≤ —Ñ–∏–ª—å–º–µ)"
    FILM     }o--o{ FILM_CREDIT : ""
```

---

## –û–ø–∏—Å–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π

### 1. DIRECTOR

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **name** ‚Äî –§–ò–û —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
* **country** ‚Äî —Å—Ç—Ä–∞–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 2. FILM

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **title** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞
* **release_year** ‚Äî –≥–æ–¥ —Ä–µ–ª–∏–∑–∞
* **primary_director_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `DIRECTOR(id)`

**–°–≤—è–∑—å:** –æ–¥–∏–Ω —Ä–µ–∂–∏—Å—Å—ë—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å ¬´–æ—Å–Ω–æ–≤–Ω—ã–º¬ª –¥–ª—è –º–Ω–æ–≥–∏—Ö —Ñ–∏–ª—å–º–æ–≤ ‚Üí **1:N** `DIRECTOR` ‚Üí `FILM`.

### 3. FILM_INFO

* **film_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `FILM(id)` –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **duration_minutes** ‚Äî –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö
* **rating** ‚Äî –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `G`, `PG`, `PG-13`, `R`, `NC-17`)
* **budget_usd** ‚Äî –±—é–¥–∂–µ—Ç

**–°–≤—è–∑—å:** –Ω–∞ –∫–∞–∂–¥—ã–π —Ñ–∏–ª—å–º —Ä–æ–≤–Ω–æ –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π ‚Üí **1:1** `FILM` ‚Üî `FILM_INFO`.

### 4. FILM_CREDIT

* **film_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `FILM(id)`
* **director_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `DIRECTOR(id)`
* **role** ‚Äî —Ä–æ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `director`, `co-director`, `producer`)
* **–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (film_id, director_id, role)**

**–°–≤—è–∑—å:** –º–Ω–æ–≥–∏–µ —Ä–µ–∂–∏—Å—Å—ë—Ä—ã (–∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª—è—Ö) –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã —Å –º–Ω–æ–≥–∏–º–∏ —Ñ–∏–ª—å–º–∞–º–∏ ‚Üí **M:N** —á–µ—Ä–µ–∑ `FILM_CREDIT`.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å 4 —Ç–∞–±–ª–∏—Ü—ã —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∏ —Å–≤—è–∑—è–º–∏.
2. **1:N**:

   * `FILM.primary_director_id` ‚Äî `NOT NULL`, `FOREIGN KEY` ‚Üí `DIRECTOR(id)`.
3. **1:1**:

   * –≤ `FILM_INFO` –ø–æ–ª–µ `film_id` —è–≤–ª—è–µ—Ç—Å—è –∏ **PK**, –∏ **FK** –Ω–∞ `FILM(id)`, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ä–æ–≤–Ω–æ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –Ω–∞ —Ñ–∏–ª—å–º.
4. **M:N**:

   * —Ç–∞–±–ª–∏—Ü–∞ `FILM_CREDIT` —Å —Å–æ—Å—Ç–∞–≤–Ω—ã–º **PK** `(film_id, director_id, role)`; –ø–æ–ª—è `film_id` –∏ `director_id` ‚Äî –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏.
5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:

   * `release_year` ‚Äî `CHECK (release_year BETWEEN 1900 AND extract(year from current_date))`
   * `duration_minutes` ‚Äî `CHECK (duration_minutes > 0)`
   * `rating` ‚Äî `CHECK (rating IN ('G','PG','PG-13','R','NC-17'))`
   * `name` –≤ `DIRECTOR` ‚Äî **UNIQUE**
6. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:

   * —É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ, –µ—Å–ª–∏ –æ–Ω —É–∫–∞–∑–∞–Ω –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π (`primary_director_id`) –≤ –∫–∞–∫–æ–º-–ª–∏–±–æ —Ñ–∏–ª—å–º–µ ‚Äî `ON DELETE RESTRICT` (–∏–ª–∏ `NO ACTION`).
   * —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –¥–æ–ª–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ `FILM_INFO` –∏ `FILM_CREDIT` ‚Äî `ON DELETE CASCADE`.

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–∞—Ç—å

1. **SQL-—Å–∫—Ä–∏–ø—Ç** —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (`CREATE TABLE` + `ALTER TABLE`).
2. **–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫), –≥–¥–µ —É–∫–∞–∑–∞–Ω–æ:

   * –≥–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–≤—è–∑—å **1:1**;
   * –≥–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–≤—è–∑—å **1:N**;
   * –≥–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–≤—è–∑—å **M:N**;
   * –∫–∞–∫–∏–º–∏ –∫–ª—é—á–∞–º–∏/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è.

</details>

---

<details>
<summary><strong style="font-size: 16px;">–ó–∞–¥–∞—á–∞ 3</strong></summary>

## –ó–∞–¥–∞–Ω–∏–µ: ¬´–ò–≥—Ä–æ–≤–∞—è –∏–Ω–¥—É—Å—Ç—Ä–∏—è ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –∏–≥—Ä—ã¬ª

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ **4 —Ç–∞–±–ª–∏—Ü**, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â—É—é —Å–≤—è–∑–∏:

* **One-to-One (1:1)**
* **One-to-Many (1:N)**
* **Many-to-Many (M:N)**

---

## –î–∏–∞–≥—Ä–∞–º–º–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–≤—è–∑–µ–π

```mermaid
erDiagram
    DEVELOPER ||--o{ GAME : "1:N (primary_developer_id)"
    GAME ||--|| GAME_INFO : "1:1"
    DEVELOPER }o--o{ GAME_CREDIT : "M:N (—É—á–∞—Å—Ç–∏–µ/—Ä–æ–ª—å)"
    GAME      }o--o{ GAME_CREDIT : ""
```

---

## –û–ø–∏—Å–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π

### 1. DEVELOPER

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **name** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—É–¥–∏–∏/—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (**UNIQUE**)
* **country** ‚Äî —Å—Ç—Ä–∞–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 2. GAME

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **title** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã
* **release_year** ‚Äî –≥–æ–¥ —Ä–µ–ª–∏–∑–∞
* **primary_developer_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `DEVELOPER(id)` (**NOT NULL**)

**–°–≤—è–∑—å 1:N:** –æ–¥–Ω–∞ —Å—Ç—É–¥–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å ¬´–æ—Å–Ω–æ–≤–Ω—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º¬ª –º–Ω–æ–≥–∏—Ö –∏–≥—Ä.

### 3. GAME_INFO

* **game_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `GAME(id)` –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ **–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á**
* **engine** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–≤–∏–∂–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, *Unity*, *Unreal*, *Godot*)
* **age_rating** ‚Äî –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `E`, `T`, `M`, `AO`)
* **playtime_hours** ‚Äî —Å—Ä–µ–¥–Ω—è—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è, —á–∞—Å—ã (—Ü–µ–ª–æ–µ/—á–∏—Å–ª–æ–≤–æ–µ)

**–°–≤—è–∑—å 1:1:** –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã —Ä–æ–≤–Ω–æ –æ–¥–Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å.

### 4. GAME_CREDIT

* **game_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `GAME(id)`
* **developer_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `DEVELOPER(id)`
* **role** ‚Äî —Ä–æ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `co-dev`, `outsourcing`, `audio`, `writer`)
* **–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (game_id, developer_id, role)** ‚Äî –∑–∞–ø—Ä–µ—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Ä–æ–ª–∏ –¥–ª—è –ø–∞—Ä—ã –∏–≥—Ä–∞‚Äì—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫

**–°–≤—è–∑—å M:N:** –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ç—É–¥–∏–π –º–æ–≥—É—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏–≥—Ä –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª—è—Ö.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å 4 —Ç–∞–±–ª–∏—Ü—ã —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∏ —Å–≤—è–∑—è–º–∏.
2. **1:N:**

   * `GAME.primary_developer_id` ‚Äî `NOT NULL`, `FOREIGN KEY` ‚Üí `DEVELOPER(id)`.
3. **1:1:**

   * –≤ `GAME_INFO` –ø–æ–ª–µ `game_id` —è–≤–ª—è–µ—Ç—Å—è –∏ **PK**, –∏ **FK** –Ω–∞ `GAME(id)`, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ä–æ–≤–Ω–æ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –Ω–∞ –∏–≥—Ä—É.
4. **M:N:**

   * —Ç–∞–±–ª–∏—Ü–∞ `GAME_CREDIT` —Å —Å–æ—Å—Ç–∞–≤–Ω—ã–º **PK** `(game_id, developer_id, role)`; –ø–æ–ª—è `game_id` –∏ `developer_id` ‚Äî –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏.
5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:

   * `DEVELOPER.name` ‚Äî **UNIQUE**.
   * `release_year` ‚Äî `CHECK (release_year BETWEEN 1970 AND extract(year from current_date))`.
   * `age_rating` ‚Äî `CHECK (age_rating IN ('E','T','M','AO'))`.
   * `playtime_hours` ‚Äî `CHECK (playtime_hours > 0)`.
6. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:

   * —É–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ, –µ—Å–ª–∏ –æ–Ω —É–∫–∞–∑–∞–Ω –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π `primary_developer_id` –≤ –∫–∞–∫–æ–º-–ª–∏–±–æ `GAME` ‚Äî `ON DELETE RESTRICT` (–∏–ª–∏ `NO ACTION`).
   * —É–¥–∞–ª–µ–Ω–∏–µ –∏–≥—Ä—ã –¥–æ–ª–∂–Ω–æ –∫–∞—Å–∫–∞–¥–Ω–æ —É–¥–∞–ª—è—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ `GAME_INFO` –∏ `GAME_CREDIT` ‚Äî `ON DELETE CASCADE`.

</details>

---

<details>
<summary><strong style="font-size: 16px;">–ó–∞–¥–∞—á–∞ 4</strong></summary>

## –ó–∞–¥–∞–Ω–∏–µ: ¬´–ò–≥—Ä–æ–≤–æ–π –º–∏—Ä ‚Äî –ª–æ–∫–∞—Ü–∏–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏¬ª

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ **4 —Ç–∞–±–ª–∏—Ü**, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â—É—é —Å–≤—è–∑–∏:

* **One-to-One (1:1)**
* **One-to-Many (1:N)**
* **Many-to-Many (M:N)**

---

## –î–∏–∞–≥—Ä–∞–º–º–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–≤—è–∑–µ–π

```mermaid
erDiagram
    LOCATION ||--|| LOCATION_INFO : "1:1"
    LOCATION ||--o{ CHARACTER : "1:N (home_location_id)"
    CHARACTER }o--o{ CHARACTER_VISIT : "M:N (–ø–æ—Å–µ—â–µ–Ω–∏—è)"
    LOCATION  }o--o{ CHARACTER_VISIT : ""
```

---

## –û–ø–∏—Å–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π

### 1. LOCATION

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **name** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ (**UNIQUE**)
* **region** ‚Äî —Ä–µ–≥–∏–æ–Ω/–±–∏–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Forest`, `Desert`, `Tundra`)

**–°–≤—è–∑–∏:**

* **1:1** —Å `LOCATION_INFO` (–ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–∫–∞—Ü–∏–∏)
* **1:N** —Å `CHARACTER` —á–µ—Ä–µ–∑ –ø–æ–ª–µ `CHARACTER.home_location_id` (–∂–∏—Ç–µ–ª–∏ –ª–æ–∫–∞—Ü–∏–∏)
* —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ **M:N** —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `CHARACTER_VISIT` (–º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –ø–æ—Å–µ—â–∞—é—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ª–æ–∫–∞—Ü–∏–π)

---

### 2. LOCATION_INFO

* **location_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `LOCATION(id)` –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ **–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á**
* **danger_level** ‚Äî —É—Ä–æ–≤–µ–Ω—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (—Ü–µ–ª–æ–µ 1‚Äì10)
* **climate** ‚Äî –∫–ª–∏–º–∞—Ç/–ø–æ–≥–æ–¥–Ω–∞—è –∑–æ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Temperate`, `Arid`, `Polar`)
* **fast_travel_unlocked** ‚Äî boolean: –¥–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –±—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ–º–µ—â–∞–ª–∫–∞

**–°–≤—è–∑—å:**
–†–æ–≤–Ω–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–∞ –ª–æ–∫–∞—Ü–∏—é ‚Üí **1:1** —Å `LOCATION`.
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: `danger_level` ‚Äî `CHECK (danger_level BETWEEN 1 AND 10)`.

---

### 3. CHARACTER

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **name** ‚Äî –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (**UNIQUE**)
* **class** ‚Äî –∫–ª–∞—Å—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Warrior`, `Mage`, `Rogue`)
* **home_location_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `LOCATION(id)` (**NOT NULL**)

**–°–≤—è–∑—å:**
–û–¥–Ω–∞ –ª–æ–∫–∞—Ü–∏—è –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ ¬´—Ä–æ–¥–Ω—ã—Ö¬ª –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π ‚Üí **1:N** –º–µ–∂–¥—É `LOCATION` –∏ `CHARACTER`.

---

### 4. CHARACTER_VISIT

* **character_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `CHARACTER(id)`
* **location_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `LOCATION(id)`
* **visited_at** ‚Äî –¥–∞—Ç–∞/–≤—Ä–µ–º—è –≤–∏–∑–∏—Ç–∞
* **purpose** ‚Äî —Ü–µ–ª—å –≤–∏–∑–∏—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `quest`, `trade`, `explore`)
* **–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (character_id, location_id, visited_at)** ‚Äî –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–∏–∑–∏—Ç

**–°–≤—è–∑—å:**
–ú–Ω–æ–≥–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –ø–æ—Å–µ—â–∞—é—Ç –º–Ω–æ–≥–∏–µ –ª–æ–∫–∞—Ü–∏–∏ –≤ —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è ‚Üí **M:N** —á–µ—Ä–µ–∑ `CHARACTER_VISIT`.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å —Ä–æ–≤–Ω–æ **4 —Ç–∞–±–ª–∏—Ü—ã** —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∏ —Å–≤—è–∑—è–º–∏.
2. **1:1:** `LOCATION_INFO.location_id` —è–≤–ª—è–µ—Ç—Å—è –∏ **PK**, –∏ **FK** –Ω–∞ `LOCATION(id)` ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É —Å –¥–µ—Ç–∞–ª—è–º–∏ –Ω–∞ –∫–∞–∂–¥—É—é –ª–æ–∫–∞—Ü–∏—é.
3. **1:N:** `CHARACTER.home_location_id` ‚Äî **NOT NULL**, –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `LOCATION(id)`.
4. **M:N:** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ `CHARACTER_VISIT` —Å —Å–æ—Å—Ç–∞–≤–Ω—ã–º **PK** `(character_id, location_id, visited_at)`; –æ–±–∞ –ø–æ–ª—è `character_id` –∏ `location_id` ‚Äî –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏.
5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞:

   * `LOCATION.name` –∏ `CHARACTER.name` ‚Äî **UNIQUE**.
   * `LOCATION_INFO.danger_level` ‚Äî `CHECK (1‚Äì10)`.
   * `visited_at` ‚Äî –Ω–µ –≤ –±—É–¥—É—â–µ–º: `CHECK (visited_at <= now())`.
6. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:

   * —É–¥–∞–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ –∫–∞—Å–∫–∞–¥–Ω–æ —É–¥–∞–ª—è—Ç—å `LOCATION_INFO` –∏ –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π `CHARACTER_VISIT` –¥–ª—è —ç—Ç–æ–π –ª–æ–∫–∞—Ü–∏–∏ ‚Äî `ON DELETE CASCADE`; —É–¥–∞–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ **–∑–∞–ø—Ä–µ—â–µ–Ω–æ**, –µ—Å–ª–∏ –µ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å `home_location_id` –Ω–∞ –Ω–µ—ë ‚Äî `ON DELETE RESTRICT` (–∏–ª–∏ `NO ACTION`).
   * —É–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–æ–ª–∂–Ω–æ –∫–∞—Å–∫–∞–¥–Ω–æ —É–¥–∞–ª—è—Ç—å –µ–≥–æ –∑–∞–ø–∏—Å–∏ –∏–∑ `CHARACTER_VISIT` ‚Äî `ON DELETE CASCADE`.

</details>

---

<details>
<summary><strong style="font-size: 16px;">–ó–∞–¥–∞—á–∞ 5</strong></summary>

## –ó–∞–¥–∞–Ω–∏–µ: ¬´–ò–≥—Ä–æ–≤–æ–π –º–∏—Ä ‚Äî —Ä–µ—Ü–µ–ø—Ç—ã –∏ –∫—Ä–∞—Ñ—Ç¬ª

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ **4 —Ç–∞–±–ª–∏—Ü**, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:

* **One-to-One (1:1)**
* **One-to-Many (1:N)**
* **Many-to-Many (M:N)**

---

## –î–∏–∞–≥—Ä–∞–º–º–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–≤—è–∑–µ–π

```mermaid
erDiagram
    ITEM ||--|| ITEM_INFO : "1:1"
    ITEM ||--o{ RECIPE : "1:N (output_item_id)"
    RECIPE }o--o{ RECIPE_INGREDIENT : "M:N (–∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã)"
    ITEM   }o--o{ RECIPE_INGREDIENT : ""
```

---

## –û–ø–∏—Å–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π

### 1. ITEM

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **name** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ (**UNIQUE**)
* **rarity** ‚Äî —Ä–µ–¥–∫–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `common`, `rare`, `epic`, `legendary`)
* **stack_limit** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ (—Ü–µ–ª–æ–µ > 0)

**–°–≤—è–∑–∏:**

* **1:1** —Å `ITEM_INFO` –ø–æ `id`
* **1:N**: –Ω–∞ –æ–¥–∏–Ω –ø—Ä–µ–¥–º–µ—Ç –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è (`RECIPE.output_item_id ‚Üí ITEM.id`)
* —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ **M:N** –∫–∞–∫ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç —á–µ—Ä–µ–∑ `RECIPE_INGREDIENT`

---

### 2. ITEM_INFO

* **item_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `ITEM(id)` –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ **–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á**
* **weight** ‚Äî –≤–µ—Å –ø—Ä–µ–¥–º–µ—Ç–∞ (—á–∏—Å–ª–æ ‚â• 0)
* **is_tradeable** ‚Äî –º–æ–∂–Ω–æ –ª–∏ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å (`boolean`)
* **durability_max** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—á–Ω–æ—Å—Ç—å (—Ü–µ–ª–æ–µ ‚â• 0)

**–°–≤—è–∑—å:**
–†–æ–≤–Ω–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ –∫–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç ‚Üí **1:1** —Å `ITEM`.

---

### 3. RECIPE

* **id** ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
* **name** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ (**UNIQUE**)
* **output_item_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `ITEM(id)` (**NOT NULL**) ‚Äî –∫–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç –ø–æ–ª—É—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
* **craft_time_seconds** ‚Äî –≤—Ä–µ–º—è –∫—Ä–∞—Ñ—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (—Ü–µ–ª–æ–µ > 0)
* **required_station** ‚Äî —Ç—Ä–µ–±—É–µ–º–∞—è —Å—Ç–∞–Ω—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `campfire`, `anvil`, `alchemy_table`)

**–°–≤—è–∑—å:**
–û–¥–∏–Ω –ø—Ä–µ–¥–º–µ—Ç (—Ä–µ–∑—É–ª—å—Ç–∞—Ç) –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤ ‚Üí **1:N** –º–µ–∂–¥—É `ITEM` –∏ `RECIPE`.

---

### 4. RECIPE_INGREDIENT

* **recipe_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `RECIPE(id)`
* **item_id** ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ `ITEM(id)`
* **quantity** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞ (—Ü–µ–ª–æ–µ > 0)
* **–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (recipe_id, item_id)** ‚Äî –æ–¥–∏–Ω –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –≤ —Ä–µ—Ü–µ–ø—Ç–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π

**–°–≤—è–∑—å:**
–ú–Ω–æ–≥–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–Ω–æ–≥–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∫–∞–∫ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã ‚Üí **M:N** —á–µ—Ä–µ–∑ `RECIPE_INGREDIENT`.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å **—Ä–æ–≤–Ω–æ 4 —Ç–∞–±–ª–∏—Ü—ã** —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∏ —Å–≤—è–∑—è–º–∏.
2. **1:1:** `ITEM_INFO.item_id` —è–≤–ª—è–µ—Ç—Å—è –∏ **PK**, –∏ **FK** –Ω–∞ `ITEM(id)`.
3. **1:N:** `RECIPE.output_item_id` ‚Äî **NOT NULL**, `FOREIGN KEY` ‚Üí `ITEM(id)`.
4. **M:N:** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ `RECIPE_INGREDIENT` —Å —Å–æ—Å—Ç–∞–≤–Ω—ã–º **PK** `(recipe_id, item_id)`; –æ–±–∞ –ø–æ–ª—è ‚Äî –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏.
5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:

   * `ITEM.name` –∏ `RECIPE.name` ‚Äî **UNIQUE**;
   * `stack_limit > 0`, `weight ‚â• 0`, `durability_max ‚â• 0`, `craft_time_seconds > 0`;
   * –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –¥–æ–º–µ–Ω —Ä–µ–¥–∫–æ—Å—Ç–∏ –∏ —Å—Ç–∞–Ω—Ü–∏–π —á–µ—Ä–µ–∑ `CHECK (...) IN (...)`.
6. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:

   * —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –¥–æ–ª–∂–Ω–æ —É–¥–∞–ª—è—Ç—å —Å–≤—è–∑–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É `ITEM_INFO` ‚Äî `ON DELETE CASCADE`;
   * —É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ –¥–æ–ª–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –µ–≥–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã ‚Äî `ON DELETE CASCADE`;
   * —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ **—Ä–µ–∑—É–ª—å—Ç–∞—Ç** (`RECIPE.output_item_id`) –∏–ª–∏ –∫–∞–∫ **–∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç** (`RECIPE_INGREDIENT.item_id`), –¥–æ–ø—É—Å—Ç–∏–º–æ **—Ç–æ–ª—å–∫–æ** –µ—Å–ª–∏ —ç—Ç–æ —è–≤–Ω–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ON DELETE RESTRICT` (–∏–ª–∏ `NO ACTION`) –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏.

</details>