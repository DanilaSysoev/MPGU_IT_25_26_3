# Урок 1. Linux как среда обитания безопасного софта

**Тип занятия:** Воркшоп (Workshop)  
**Продолжительность:** 3 астрономических часа (180 мин)  
**Сложность:** Базовая  
**Дедлайн по ДЗ:** 1 неделя (задание базовое, не требует глубокого погружения, важно сделать быстро, чтобы не тормозить курс).  

---

## 1. Конспект занятия (План для преподавателя)

### Часть 1. Введение и Мотивация (20 мин)

*Цель: Объяснить, почему мы не будем писать серверный код на Windows, и зачем нам «черное окошко».*

**Тезисы:**

1. **Почему Linux?**
    * **Статистика:** 90%+ серверов в облаках работают на Linux.
    * **Безопасность:** Linux спроектирован как многопользовательская система с четким разделением прав (Permissions). Windows изначально была однопользовательской.
    * **Прозрачность:** В Linux «все есть файл». Мы можем настроить каждый винтик системы.
2. **Аналогия:**
    * *Windows/macOS (GUI)* — это полет в самолете пассажиром. Красиво, удобно, стюардесса приносит еду, но вы не можете управлять полетом.
    * *Linux (CLI)* — это кабина пилота. Куча тумблеров, страшно, но вы имеете полный контроль над ситуацией. Если вы хотите заниматься безопасностью, вам нужно быть пилотом.
3. **CLI vs GUI:** В случае взлома у вас часто не будет графического интерфейса. Только SSH и консоль.

### Часть 2. Настройка окружения (40 мин)

*Цель: Убедиться, что у каждого студента есть рабочий терминал.*

**Практика (Live Demo):**

* **Опрос:** У кого Mac? У кого Linux? У кого Windows?
* **Windows:** Установка **WSL2 (Windows Subsystem for Linux)**. Это стандарт индустрии сейчас. Ставим Ubuntu 22.04/24.04 из Microsoft Store.
  * *Нюанс:* Если WSL не ставится (старая Win/корпоративный ноут), используем VirtualBox + образ Ubuntu Server.
* **macOS:** Терминал уже есть (zsh), но ставим пакетный менеджер **Homebrew**.
* **Linux:** Вы уже молодцы.

**Материалы:**

* [Официальная инструкция по установке WSL2](https://learn.microsoft.com/ru-ru/windows/wsl/install)

### Часть 3. Выживание в консоли: Навигация и Файлы (60 мин)

*Цель: Научиться ходить по папкам и создавать файлы без мышки.*

**Основные команды (разбираем на экране, студенты повторяют):**

1. `pwd` (Где я?) и `ls -la` (Что вокруг?). Объясняем, что значат точки `.` (текущая) и `..` (родительская).
2. `cd` (Телепорт). Абсолютные (`/home/user`) и относительные пути.
3. `mkdir -p` (Создать структуру папок).
4. `touch`, `nano` (Создание и редактирование файлов). *Показываем nano как самый простой редактор для новичков.*
5. `cp`, `mv`, `rm`.
    * **Важное предупреждение безопасности:** Команда `rm -rf /` — это выстрел в голову системе. В Linux нет корзины при удалении через консоль.

**Практика:**
Создаем структуру проекта:

```bash
mkdir -p course_security/lesson1/logs
cd course_security/lesson1
touch readme.txt
```

### Часть 4. Сила текста: cat, grep, pipes (40 мин)

*Цель: Показать мощь Linux для анализа логов и данных.*

**Тезисы:**

1. **Потоки:** stdout (вывод) и stdin (ввод).
2. **Конвейер (Pipe `|`):** Передача результата одной команды в другую. Это основа философии Unix.
3. `cat` — вывести файл.
4. `grep` — поиск строки. Главный инструмент безопасника при анализе логов.

**Сценарий:**

* Создаем файл с "мусором" и одной важной строкой.
* Ищем строку: `cat data.txt | grep "password"`
* Перенаправление вывода `>` и `>>` (записать результат в файл).

### Часть 5. Права доступа (Intro) и установка ПО (20 мин)

*Цель: Базовое понимание, почему `sudo` — это опасно.*

1. `sudo` — "SuperUser DO". Выполнение команды от имени администратора.
2. Пакетный менеджер `apt` (как AppStore, только в тексте).
    * `sudo apt update` (обновить каталог).
    * `sudo apt install mc` (поставить Midnight Commander) или `htop`.

---

## 2. Домашнее задание №1: «Следопыт»

**Легенда:**
Вы — младший специалист по безопасности. Вам выдали доступ к чистому серверу (вашему локальному Linux/WSL). Ваша задача — подготовить рабочее окружение, создать структуру секретного проекта и зафиксировать свои действия.

**Задание:**

1. **Подготовка:** Убедиться, что у вас установлен Linux (WSL, VM или нативная ОС).
2. **Структура:** Используя **только консоль**, создать в домашней директории структуру папок:

    ```text
    ~/secure_project/
    ├── docs/
    ├── src/
    └── backup/
    ```

3. **Создание файлов:**
    * В папке `docs` создать файл `secret_plan.txt`. Внутри написать одну строку: "The password is 12345" (используйте `echo` или `nano`).
    * Скопировать этот файл в папку `backup` под именем `secret_plan_v1.txt`.
4. **Работа с потоками и grep:**
    * Выполнить команду, которая найдет слово "password" внутри папки `backup` и запишет результат поиска в новый файл `~/secure_project/evidence.log`.
    * *Подсказка: используйте grep.*
5. **Установка софта:**
    * Установить утилиту `tree` (или использовать `ls -R`, если `tree` недоступен, но лучше установить).
    * Вывести структуру вашей папки командой `tree ~/secure_project` и сохранить вывод в файл `report.txt`.
6. **Отчет:**
    * Содержимое файла `report.txt`.
    * Историю введенных команд (команда `history` в терминале).

**Формат сдачи:**
Один текстовый файл (Markdown `.md`), содержащий:

1. Скриншот терминала, где виден результат команды `tree ~/secure_project`.
2. Копию содержимого файла `evidence.log`.
3. Список команд, которые вы вводили для выполнения задания (вывод `history`).

---

## 3. Критерии оценивания (Максимум 8 баллов)

Система оценки аддитивная. Баллы суммируются.

| Критерий | Баллы | Описание |
| :--- | :---: | :--- |
| **Окружение** | **2** | Предоставлен скриншот работающего терминала Linux (WSL/Ubuntu/Debian/Fedora/macOS). Команды выполнены в Bash/Zsh (не PowerShell!). |
| **Структура папок** | **2** | Структура директорий `docs`, `src`, `backup` создана верно и находится внутри одной папки проекта. |
| **Работа с файлами** | **2** | Файлы созданы, скопированы верно. В файле `evidence.log` содержится правильная строка, найденная `grep`'ом. |
| **Установка ПО** | **1** | Успешно установлена утилита `tree` (или аналог), и её вывод зафиксирован в отчете. |
| **История команд** | **1** | Предоставлен чистый лог `history`, показывающий последовательность действий. |
| **Итого** | **8** | |

### Штрафы (вычитаются из суммы)

* **-2 балла:** Использование GUI (графического интерфейса) для создания папок (видно по отсутствию команд `mkdir`/`cp` в истории `history`).
* **-1 балл:** "Грязная" история команд в отчете (слишком много лишних ошибочных команд, не относящихся к делу. Студент должен уметь фильтровать то, что сдает).
* **-1 балл:** Скриншоты сделаны на камеру телефона (только PrtScn / Snipping Tool). Мы учим цифровой гигиене.
* **-2 балла:** Просроченный дедлайн (если сдано позже 1 недели).

---

## Дополнительные материалы для студентов

1. **Книга:** Уильям Шоттс, "Командная строка Linux" (The Linux Command Line) — *Библия для новичков. Читать главы 1-4.*
2. **Интерактивный тренажер:** [Linux Survival](https://linuxsurvival.com/) — *Бесплатный браузерный тренажер первых команд.*
3. **Справочник:** [Хакерские команды Linux (Cheat Sheet)](https://cheatography.com/davechild/cheat-sheets/linux-command-line/)
