## Agile 4. Основы ООП на С# (максимальный балл 8, дедлай 30.09.2025 включительно)

> Требование к атрибутам/свойствам для **всех** классов:
>
> * Поля сделать `private`; для каждого поля создать **публичное** свойство с `get; set;`.
> * Для числовых/логических/строковых свойств добавить **простую валидацию** в `set` (например, неотрицательные числа, непустые строки).
> * В невиртуальных методах использовать/демонстрировать обращение к этим свойствам.

---

## Шкала оценивания.
### Критерии (по пунктам)

1. **Базовый класс (2 балла)**

   * (1 б.) Наличие двух приватных полей с корректными свойствами (валидация в `set`).
   * (1 б.) Реализованы два невиртуальных метода, которые используют свойства.

2. **Виртуальный метод (1 балл)**

   * (1 б.) Определён виртуальный метод с поведением по умолчанию.

3. **Потомок-1 (2 балла)**

   * (1 б.) Добавлен новый атрибут + свойство с валидацией.
   * (1 б.) Реализован дополнительный невиртуальный метод и переопределён виртуальный метод.

4. **Потомок-2 (1 балл)**

   * (0.5 б.) Добавлен новый атрибут + свойство с валидацией.
   * (0.5 б.) Реализован дополнительный невиртуальный метод.
   * (Важно: виртуальный метод **не переопределяется**).

5. **Внук (2 балла)**

   * (1 б.) Добавлен новый атрибут + свойство с валидацией.
   * (1 б.) Реализован дополнительный невиртуальный метод и корректное переопределение виртуального метода «деда».

## Итог

* Максимум: **8 баллов**.
* Частичные баллы допускаются за неполную реализацию (например, свойство без валидации или метод, не использующий данные).

---

## 1) Транспорт и запуск

**Виртуальный метод:** `Start()` — сообщение о запуске.

* **Vehicle (родитель)**
  Поля: `string name`, `int maxSpeed`.
  Свойства: `Name`, `MaxSpeed` (MaxSpeed ≥ 0).
  Невиртуальные методы:

  * `Describe()` — печатает `Name` и `MaxSpeed`.
  * `IsFast(int threshold)` — возвращает `MaxSpeed > threshold`.
    Виртуальный:
  * `public virtual string Start()` → `"Vehicle starting..."`.

* **Car : Vehicle (потомок-1)**
  Поле: `int doors` → свойство `Doors` (≥ 1).
  Невиртуальный: `OpenTrunk()` — печатает действие.
  Переопределяет: `Start()` → `"Car engine roars!"`.

* **Bicycle : Vehicle (потомок-2)**
  Поле: `bool hasBell` → `HasBell`.
  Невиртуальный: `Ring()` — если `HasBell`, печатает звонок.
  **Не** переопределяет `Start()` (наследует Vehicle).

* **ElectricBike : Bicycle (внук)**
  Поле: `int batteryLevel` → `BatteryLevel` (0–100).
  Невиртуальный: `Charge(int amount)` — увеличивает `BatteryLevel`.
  Переопределяет: `Start()` → `"E-Bike powering up..."`.

---

## 2) Игровые сущности и действие

### Базовый класс: `GameEntity`

* **Поля:**
  `string name`, `int health`.
* **Свойства:**
  `Name` (не пустая строка), `Health` (≥ 0).
* **Невиртуальные методы:**

  * `TakeDamage(int dmg)` — уменьшает `Health` на `dmg` (не ниже 0).
  * `IsAlive()` — возвращает `bool` (`Health > 0`).
* **Виртуальный метод:**
  `public virtual string Act()` → возвращает `"GameEntity idles."` (поведение по умолчанию).

---

### Потомок-1: `Warrior : GameEntity`

* **Доп. поле:**
  `int strength` → свойство `Strength` (≥ 0).
* **Невиртуальный метод:**
  `PowerStrike()` — возвращает строку `"Warrior uses PowerStrike for {Strength} damage!"`.
* **Переопределение виртуального метода:**
  `Act()` → `"Warrior attacks with sword."`.

---

### Потомок-2: `Villager : GameEntity`

* **Доп. поле:**
  `string occupation` → свойство `Occupation` (не пустая строка).
* **Невиртуальный метод:**
  `Work()` — возвращает строку `"Villager works as {Occupation}."`.
* **Виртуальный метод не переопределяется:**
  Наследует `Act()` из `GameEntity` (по умолчанию «idles»).

---

### Внук от потомка-2: `Merchant : Villager`

* **Доп. поле:**
  `int gold` → свойство `Gold` (≥ 0).
* **Невиртуальный метод:**
  `Trade(int amount)` — уменьшает/увеличивает `Gold` на `amount` (не допускайте отрицательного результата; при попытке уйти в минус — отказ или обрезка до 0), возвращает строку с итоговым `Gold`.
* **Переопределение виртуального метода «деда»:**
  `Act()` → `"Merchant trades with travelers."`.

---

## 3) Документы и печать

**Виртуальный метод:** `Print()` — возвращает строку с форматированным содержимым.

* **Document**
  Поля: `string title`, `string content`.
  Свойства: `Title` (не пусто), `Content` (может быть пусто).
  Невиртуальные:

  * `WordCount()` — считает слова в `Content`.
  * `Preview(int chars)` — возвращает префикс.
    Виртуальный: `public virtual string Print()` → `Title + "\n" + Content`.

* **Report : Document**
  Поле: `string author` → `Author` (не пусто).
  Невиртуальный: `Header()` — возвращает заголовок с автором.
  Переопределяет: `Print()` — добавляет `Header()`.

* **Note : Document**
  Поле: `bool pinned` → `Pinned`.
  Невиртуальный: `Pin()` — ставит `Pinned = true`.
  Не переопределяет `Print()`.

* **StickyNote : Note**
  Поле: `string color` → `Color` (не пусто).
  Невиртуальный: `Recolor(string c)`.
  Переопределяет: `Print()` — добавляет `[Color]` в начало.

---

## 4) Платёжная система

**Виртуальный метод:** `Process(decimal amount)` — возвращает строку-статус.

* **PaymentGateway**
  Поля: `string providerName`, `bool sandbox`.
  Свойства: `ProviderName` (не пусто), `Sandbox`.
  Невиртуальные:

  * `EnableSandbox(bool on)` — переключает.
  * `Info()` — возвращает строку с провайдером/режимом.
    Виртуальный: `public virtual string Process(decimal amount)` → `"Processed {amount} via base"`.

* **CardGateway : PaymentGateway**
  Поле: `string maskedPan` → `MaskedPan` (маска вида `"**** **** **** 1234"`).
  Невиртуальный: `SetMaskedPan(string pan)`.
  Переопределяет: `Process` → сообщение про карту.

* **WalletGateway : PaymentGateway**
  Поле: `string walletId` → `WalletId` (не пусто).
  Невиртуальный: `Link(string id)`.
  Не переопределяет `Process`.

* **CryptoWallet : WalletGateway**
  Поле: `string network` → `Network` (`"BTC"`, `"ETH"` и т.п.).
  Невиртуальный: `SwitchNetwork(string n)`.
  Переопределяет: `Process` → сообщение про сеть.

---

## 5) Логгер и форматирование

**Виртуальный метод:** `Format(string message)` — форматирует строку.

* **Logger**
  Поля: `string name`, `int level`.
  Свойства: `Name` (не пусто), `Level` (0+).
  Невиртуальные:

  * `Log(string msg)` — выводит `Format(msg)`.
  * `SetLevel(int lvl)` — валидация.
    Виртуальный: `public virtual string Format(string message)` → `"[{Level}] {Name}: {message}"`.

* **JsonLogger : Logger**
  Поле: `bool pretty` → `Pretty`.
  Невиртуальный: `TogglePretty()`.
  Переопределяет: `Format` → JSON-строка.

* **PlainLogger : Logger**
  Поле: `string prefix` → `Prefix` (может быть пусто).
  Невиртуальный: `SetPrefix(string p)`.
  Не переопределяет `Format`.

* **AnsiLogger : PlainLogger**
  Поле: `string colorCode` → `ColorCode` (не пусто).
  Невиртуальный: `SetColor(string code)`.
  Переопределяет: `Format` — добавляет ANSI-коды к базовому.

---

## 6) Животные и звук

**Виртуальный метод:** `Speak()` — возвращает строку со звуком.

* **Animal**
  Поля: `string name`, `int age`.
  Свойства: `Name` (не пусто), `Age` (≥ 0).
  Невиртуальные:

  * `Describe()` — имя и возраст.
  * `Birthday()` — `Age++`.
    Виртуальный: `public virtual string Speak()` → `"..."`.

* **Dog : Animal**
  Поле: `string breed` → `Breed` (не пусто).
  Невиртуальный: `Fetch()` — печатает действие.
  Переопределяет: `Speak()` → `"Woof!"`.

* **Fish : Animal**
  Поле: `bool freshwater` → `Freshwater`.
  Невиртуальный: `Swim()` — печатает действие.
  Не переопределяет `Speak()`.

* **Shark : Fish**
  Поле: `int teeth` → `Teeth` (> 0).
  Невиртуальный: `Hunt()`.
  Переопределяет: `Speak()` → `"..."` (рычание/тишина на ваш вкус).

---

## 7) Оповещения

**Виртуальный метод:** `Send(string to, string text)` — возвращает статус.

* **Notifier**
  Поля: `string sender`, `bool enabled`.
  Свойства: `Sender` (не пусто), `Enabled`.
  Невиртуальные:

  * `Enable()` — `Enabled = true`.
  * `Disable()` — `Enabled = false`.
    Виртуальный: `public virtual string Send(string to, string text)` → `"Base send to {to}: {text}"` (если `Enabled`, иначе — `"Disabled"`).

* **EmailNotifier : Notifier**
  Поле: `string smtpHost` → `SmtpHost` (не пусто).
  Невиртуальный: `Configure(string host)`.
  Переопределяет: `Send` — формат письма.

* **SmsNotifier : Notifier**
  Поле: `string provider` → `Provider` (не пусто).
  Невиртуальный: `SetProvider(string p)`.
  Не переопределяет `Send`.

* **SecureSmsNotifier : SmsNotifier**
  Поле: `bool encrypted` → `Encrypted`.
  Невиртуальный: `EnableEncryption(bool on)`.
  Переопределяет: `Send` — помечает как «encrypted».

---

## 8) Датчики и чтение значений

**Виртуальный метод:** `Read()` — возвращает `double` (текущее значение).

* **Sensor**
  Поля: `string id`, `bool active`.
  Свойства: `Id` (не пусто), `Active`.
  Невиртуальные:

  * `Activate()`/`Deactivate()` — переключают `Active`.
  * `Info()` — строка с Id/Active.
    Виртуальный: `public virtual double Read()` → `0.0` (если `Active`, иначе бросает `InvalidOperationException` или возвращает `double.NaN` — выберите и задокументируйте).

* **Thermometer : Sensor**
  Поле: `double celsius` → `Celsius`.
  Невиртуальный: `SetCelsius(double c)`.
  Переопределяет: `Read()` → `Celsius`.

* **Hygrometer : Sensor**
  Поле: `double humidity` → `Humidity` (0–100).
  Невиртуальный: `SetHumidity(double h)`.
  Не переопределяет `Read()`.

* **SmartHygrometer : Hygrometer**
  Поле: `double calibration` → `Calibration` (−10..+10).
  Невиртуальный: `Calibrate(double delta)`.
  Переопределяет: `Read()` → `Humidity + Calibration`.

---

## 9) Игровые персонажи и атака

**Виртуальный метод:** `Attack()` — возвращает урон (`int`).

* **Character**
  Поля: `string name`, `int level`.
  Свойства: `Name` (не пусто), `Level` (≥ 1).
  Невиртуальные:

  * `LevelUp()` — `Level++`.
  * `Stats()` — строка с именем и уровнем.
    Виртуальный: `public virtual int Attack()` → `Level`.

* **Warrior : Character**
  Поле: `int strength` → `Strength` (≥ 0).
  Невиртуальный: `Train(int s)` — увеличивает `Strength`.
  Переопределяет: `Attack()` → `Level + Strength`.

* **Novice : Character**
  Поле: `int luck` → `Luck` (0–100).
  Невиртуальный: `Pray()` — + небольшая удача.
  Не переопределяет `Attack()`.

* **Rogue : Novice**
  Поле: `int agility` → `Agility` (≥ 0).
  Невиртуальный: `Dodge()` — печатает действие.
  Переопределяет: `Attack()` → `Level + Luck/10 + Agility/2`.

---

## 10) Сжатие файлов

**Виртуальный метод:** `Compress(byte[] data)` — возвращает сжатый `byte[]`.

* **Compressor**
  Поля: `string algorithm`, `int level`.
  Свойства: `Algorithm` (не пусто), `Level` (1–9).
  Невиртуальные:

  * `SetLevel(int lvl)` — валидация.
  * `Info()` — строка о текущих настройках.
    Виртуальный: `public virtual byte[] Compress(byte[] data)` → возвращает входные данные без изменений.

* **ZipCompressor : Compressor**
  Поле: `bool solid` → `Solid`.
  Невиртуальный: `EnableSolid(bool on)`.
  Переопределяет: `Compress` — имитация ZIP (например, добавляет заголовок байтов).

* **PlainCompressor : Compressor**
  Поле: `string comment` → `Comment` (может быть пусто).
  Невиртуальный: `SetComment(string c)`.
  Не переопределяет `Compress()`.

* **FastPlainCompressor : PlainCompressor**
  Поле: `bool fastMode` → `FastMode`.
  Невиртуальный: `EnableFast(bool on)`.
  Переопределяет: `Compress()` — «быстрая» псевдо-обработка (например, усечение/метка).
